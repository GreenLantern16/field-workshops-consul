apiVersion: consul.hashicorp.com/v1alpha1
kind: ServiceRouter
metadata:
  name: frontend
spec:
  routes:
    - match:
        http:
          queryParam:
            - name: x-version
              exact: '3'
      destination:
        service: frontend
        serviceSubset: v3
    - match:
        http:
          queryParam:
            - name: x-version
              exact: '4'
      destination:
        service: frontend
        serviceSubset: v4
