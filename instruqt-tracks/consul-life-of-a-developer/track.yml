slug: consul-life-of-a-developer
id: aoub5e2nrioo
type: track
title: 'Consul: Life of a Developer'
teaser: A short description of the track.
description: |-
  A long description of the track.

  You can use any GitHub flavoured markdown.
icon: https://storage.googleapis.com/instruqt-frontend/img/tracks/default.png
tags: []
owner: hashicorp
developers:
- lance@hashicorp.com
private: false
published: false
challenges:
- slug: 01-connect-your-runtimes-part-1
  id: xogaq1wuisti
  type: challenge
  title: 'Connect your runtimes: Part 1'
  teaser: A short description of the challenge.
  assignment: |-
    You can see the complete guide on Kubernetes multi-cluster federation here: https://www.consul.io/docs/k8s/installation/multi-cluster/kubernetes <br>

    Start deploying to the stateless cluster with Helm. <br>

    ```
    kubectl config use-context k8s1
    helm install -f /root/helm/k8s1-consul-values.yaml hashicorp hashicorp/consul  --wait --debug
    ```

    Check the pods. <br>

    ```
    kubectl get pods
    ```

    Check the Consul API. You can also see the Consul UI is now up. <br>
    ```
    curl localhost:8500/v1/status/leader
    ```

    In the next assignment you will federate with the other K8s clusters.
  notes:
  - type: text
    contents: Replace this text with your own text
  tabs:
  - title: Workstation
    type: terminal
    hostname: workstation
  - title: K8s1 - Dashboard Token
    type: code
    hostname: k8s1
    path: /root/dashboard-token.txt
  - title: K8s1 - Dashboard
    type: service
    hostname: k8s1
    path: /api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/
    port: 8001
  - title: Consul UI
    type: service
    hostname: workstation
    path: /ui/
    port: 8500
  - title: Helm Config
    type: code
    hostname: workstation
    path: /root/helm
  difficulty: basic
  timelimit: 300
- slug: 02-connect-your-runtimes-part-2
  id: 7myytdfzgmp6
  type: challenge
  title: 'Connect your runtimes: Part 2'
  teaser: A short description of the challenge.
  assignment: |-
    In this assignment you will finish the steps in this guide for the secondary cluster: https://www.consul.io/docs/k8s/installation/multi-cluster/kubernetes <br>

    First, create the federation secret. The helm chart created this for you on the primary cluster. Use the below command to extract it.

    ```
    kubectl config use-context k8s1
    kubectl get secret hashicorp-consul-federation -o yaml > consul-federation-secret.yaml
    ```

    Switch the second k8s cluster.

    ```
    kubectl config use-context k8s2
    kubectl apply -f consul-federation-secret.yaml
    ```

    Deploy Consul to k8s2 cluster.

    ```
    kubectl config use-context k8s2
    helm install -f /root/helm/k8s2-consul-values.yaml hashicorp hashicorp/consul  --wait --debug
    ```

  notes:
  - type: text
    contents: Replace this text with your own text
  tabs:
  - title: Workstation
    type: terminal
    hostname: workstation
  - title: K8s2 - Dashboard Token
    type: code
    hostname: k8s2
    path: /root/dashboard-token.txt
  - title: K8s2- Dashboard
    type: service
    hostname: k8s2
    path: /api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/
    port: 8001
  - title: Consul UI
    type: service
    hostname: workstation
    path: /ui/
    port: 8500
  - title: Helm Config
    type: code
    hostname: workstation
    path: /root/helm
  difficulty: basic
  timelimit: 1800
checksum: "10372896002323021517"
